{"version":3,"file":"plugin/components/avatar/avatar.js","sources":["webpack:///._src_plugin_components_avatar_avatar.jsx","webpack:///./src/plugin/components/avatar/avatar.jsx?a72b","webpack:///._src_plugin_components_avatar_avatar.scss","webpack:///._src_plugin_hoc_withInformation.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { View, Image } from '@tarojs/components'\nimport './avatar.scss'\n// import { useCreateWgts } from '@p/spx/wgtsStore'\nimport { useCreateWgts,$w_store } from '../../wgtsStore'\nimport withInformation from '../../hoc/withInformation'\n\n@withInformation()\nexport default class Avatar extends Component {\n  propsDefault = {\n    tData2:'233'\n  }\n  className = 'Avatar'\n\n  constructor(props) {\n    super(props)\n    console.log('Avatar',this)\n    console.log('tData',props)\n    console.log('$w_store',$w_store)\n    this.state={\n      className:'Avatar',\n      d:$w_store.wgts_store.tData\n    }\n  }\n  render () {\n    const {tData2} = this.state\n    return (\n      <View>\n        {tData2}\n        <Image src='http://storage.360buyimg.com/taro-static/static/images/logo.png' />\n      </View>\n    )\n  }\n}\n","import '@tarojs/plugin-platform-weapp/dist/runtime'\n\nimport { defaultReconciler } from '@tarojs/shared'\nimport { createNativeComponentConfig, container, SERVICE_IDENTIFIER } from '@tarojs/runtime'\n\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\n\nvar hooks = container.get(SERVICE_IDENTIFIER.Hooks)\nhooks.initNativeApiImpls = [defaultReconciler.initNativeApi]\nvar component = require(\"../../../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!./avatar.jsx\").default\nvar config = {};\nvar inst = Component(createNativeComponentConfig(component, React, ReactDOM, config))\n\n","// extracted by mini-css-extract-plugin","\nimport { useCreateWgts,$w_store } from '../wgtsStore'\nimport {getRandwords} from './utils'\n\n\nfunction getId(type) {\n  const getCmp = $w_store.getCmpList(type)\n  for(let i in getCmp){\n    if(getCmp[i]){\n      $w_store.setCmp(type,i,false)\n      return i\n    } \n  }  \n}\n// 子组件使用信道\nexport default function withInformation(targetCtx) {\n\n  return function(Component){\n    return class withInformationComponent extends Component {\n      constructor(props) {     \n        super(props)\n        console.log('withInformationComponent:this',this)\n        console.log('withInformationComponent:props',this.props)\n        console.log('withInformationComponent:state',this)\n        const { className,propsDefault } = this\n        if(className){\n          const id = getId(className)\n          console.log('getCmp',getCmp)\n          for(let i in propsDefault){\n            let key = className+'_'+i +'_' + id //getRandwords()\n            $w_store.addListener(key,(val)=>{\n              console.log('change_this',this)\n              console.log('withInformationComponent:change',i,key,val)\n              this.setState({[i]:val})\n            })\n          }\n        }\n        // \n      }\n\n      componentDidUpdate(prevProps) {\n        \n        if (this.props.realCounter !== prevProps.virtualCounter) {\n          this.props.realCounter  = prevProps.virtualCounter\n          setTimeout(() =>{\n            this.forceUpdate(()=>{\n              // console.log('forceUpdate-run2',this.props)\n              if(updatefetch&&updatefetch.length){\n                // console.log('updatefetch',updatefetch)\n                updatefetch.forEach(fn=>this[fn](prevProps))\n              }\n            })\n          },100)          \n        }\n      }      \n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;AAMA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAJA;AADA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AALA;AASA;AACA;;;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAFA;AAKA;;;;AAxBA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACbA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AADA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAIA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AATA;AACA;AAEA;AAAA;AAOA;AACA;AACA;AACA;AAnBA;AAmBA;AACA;AArBA;AAAA;AAAA;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AApCA;AACA;AADA;AAAA;AAsCA;AACA;;;;A","sourceRoot":""}