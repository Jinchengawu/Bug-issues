{"version":3,"file":"plugin/pages/list/list.js","sources":["webpack:///._src_plugin_pages_list_list.jsx","webpack:///._src_plugin_components_listItem_listItem.jsx","webpack:///._src_plugin_components_listItem_listItem.scss","webpack:///._src_plugin_hoc_withInformationPost.js","webpack:///./src/plugin/pages/list/list.jsx?8595"],"sourcesContent":["import React, { Component } from 'react'\nimport { View } from '@tarojs/components'\nimport ListItem from '../../components/listItem/listItem'\n// import Avatar from '../../components/avatar/avatar'\n// import './index.scss'\nimport { useCreateWgts,$w_store } from '../../wgtsStore'\nimport withInformationPost from '../../hoc/withInformationPost'\n\n@withInformationPost()\nexport default class Index extends Component {\n  state = {\n    list: [{\n      name: 'A',\n      value: '1'\n    }, {\n      name: 'B',\n      value: '2'\n    }, {\n      name: 'C',\n      value: '3'\n    }],\n    cmpList:[{\n      val:222\n    },{\n      val:333\n    }]\n  }\n  constructor(props){\n    super(props)\n    let t = 0;\n    setInterval(()=>{      \n      // $w_store.set('tData',t++)\n      // console.log('setInterval',t)\n      $w_store.showEvent()\n      // $w_store.emit('Avatar_tData2',t++) \n      this.setState({t:t})\n    },3000)\n    \n  }\n  testCall(...arg){\n    console.log('testCall',...arg)\n  }\n  render () {\n    \n    return (\n      <View>\n        {\n          this.state.cmpList.map((cmp,index)=>{\n            return <avatar bindStore={this.bindOnly('Avatar',index,{'tData2':cmp.val,'testCall':this.testCall})} />\n          })\n        }\n        <avatar bindStore={this.bindOnly('Avatar',0,['tData2'])} id='avatar1' tData={222}/>\n        {this.state.list.map(item => {\n          return <ListItem name={item.name} value={item.value} key={item.name} />\n        })}\n        {this.state.t}\n        <avatar bindStore={this.bindOnly('Avatar',1,['tData2'])}  id='avatar2' tData={222}/>\n      </View>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { View } from '@tarojs/components'\nimport './listItem.scss'\n\n\nexport default class ListItem extends Component {\n  render () {\n    const { name, value } = this.props\n    return (\n      <View>\n        <View>name: {name}</View>\n        <View>value: {value}</View>\n      </View>\n    )\n  }\n}\n","// extracted by mini-css-extract-plugin","\nimport { useCreateWgts,$w_store } from '../wgtsStore'\nimport {getRandwords} from './utils'\n// 初始化子组件\nfunction initPropsVal(target,key,val){\n\n}\n// 绑定普通字段\nfunction doBindKey(key,val,ctx){\n  const post = ctx.setState\n  ctx.setState = (...arg)=>{\n    post.apply(ctx,...arg)\n    console.log('bindPropsMap-setState',...arg)\n    console.log('bindPropsMap-key',key)\n  }\n}\n// 绑定回调方法\nfunction doBindFun(key,val,target){\n  \n}\nfunction bindPropsMap(maps,ctx){\n  const keys = Object.keys(maps)\n  const values = Object.values(maps)\n  keys.forEach((d,idx)=>doBindKey(d,values[idx],ctx))\n  values.forEach((d,idx)=>{\n    if(typeof d == 'function'){\n\n    }\n  })\n}\n\n//父组件信道\nexport default function withInformationPost(targetCtx) {\n\n  return function(Component){\n    return class withInformationPostComponent extends Component {\n      constructor(props) {     \n        super(props)\n        const post = this.setState\n        this.setState = (...arg)=>{\n          post.apply(this,...arg)\n        }\n\n\n        // 本地存储一个 页面 -> 同类型组件 下表数组；用来缓存渲染历史；防止多次创建;\n        this.state['__cmpList'] = {}\n        this.state['__propsMap'] = {}\n        // \n      }\n\n      // 要保证 页面多次加载 缓存不冲突；\n      bindOnly(type,index,bindProps){\n        const key = getRandwords()\n        console.log('生产id',type,'_'+key+'_',index) \n\n        const __cmpList = this.state['__cmpList'][type]\n        const __propsMap = this.state['__propsMap'][type]\n        console.log('__cmpList',__cmpList)\n        console.log('__propsMap',__propsMap)\n        if(__cmpList&&__cmpList.indexOf(index)>-1) return \n        if(!__cmpList) this.state['__cmpList'][type] = []\n        if(!__propsMap) this.state['__propsMap'][type] = []\n\n        \n\n        bindPropsMap(bindProps,this)\n        // this.state[key] = true\n        $w_store.setCmp(type,key,true)\n        this.setState({\n          __cmpList:this.state['__cmpList'][type].push(index),\n          __propsMap:this.state['__propsMap'][type].push(propsKey)\n        })\n      }\n\n      componentDidUpdate(prevProps) {\n        \n        if (this.props.realCounter !== prevProps.virtualCounter) {\n          this.props.realCounter  = prevProps.virtualCounter\n          setTimeout(() =>{\n            this.forceUpdate(()=>{\n              // console.log('forceUpdate-run2',this.props)\n              if(updatefetch&&updatefetch.length){\n                // console.log('updatefetch',updatefetch)\n                updatefetch.forEach(fn=>this[fn](prevProps))\n              }\n            })\n          },100)          \n        }\n      }      \n    }\n  }\n}\n","import '@tarojs/plugin-platform-weapp/dist/runtime'\n\nimport { defaultReconciler } from '@tarojs/shared'\nimport { createNativeComponentConfig, container, SERVICE_IDENTIFIER } from '@tarojs/runtime'\n\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\n\nvar hooks = container.get(SERVICE_IDENTIFIER.Hooks)\nhooks.initNativeApiImpls = [defaultReconciler.initNativeApi]\nvar component = require(\"../../../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!./list.jsx\").default\nvar config = {\"usingComponents\":{\"avatar\":\"../../components/avatar/avatar\"}};\nvar inst = Component(createNativeComponentConfig(component, React, ReactDOM, config))\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;;;AAGA;;;;;AAkBA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAhBA;AACA;AACA;AAFA;AAIA;AACA;AAFA;AAIA;AACA;AAFA;AAIA;AACA;AADA;AAGA;AADA;AAbA;AACA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AAHA;AAWA;AACA;;;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAAA;AACA;;;AACA;AAAA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAMA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AARA;AAWA;AAAA;AAAA;AAAA;AAXA;AAcA;;;;AAlDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;;;AAGA;;;;;;;;;;;;;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAFA;AAKA;;;;AATA;AACA;;;;;;;;;;;;ACNA;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AADA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAXA;AAYA;AACA;AACA;AAfA;AAAA;AAAA;AAiBA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AArCA;AAAA;AAAA;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AArDA;AACA;AADA;AAAA;AAuDA;AACA;;;;;;;;;;;;;AC3FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}